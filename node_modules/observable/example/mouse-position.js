
var o = require('../')
var h = require('h')

var pos = o()

pos({x:0, y:0})

window.addEventListener('mousemove', function (e) {
  pos({x: e.clientX, y: e.clientY})
})

var size = o()

size({x: window.innerWidth, y: window.innerHeight})

window.addEventListener('resize', function (e) {
  size({x: window.innerWidth, y: window.innerHeight})
})

var rel = o.compute([pos, size], function (p, s) {
    return {x: p.x/s.x, y: p.y/s.y}
  })

var hsl = o.transform(rel, function (p) {
        return 'hsl('+Math.round(p.x*360)+',100%,50%)'
      })

document.body.appendChild(
  h('div',
    h('div',
      h('h1', hsl), //o.transform(rel, JSON.stringify, JSON.parse)),
      { style: {
        'background-color': hsl,
        position: 'relative',
        top:  o.transform(rel, function (p) { return (100 + 50 * p.y * -1)+'px' }),
        left: o.transform(rel, function (p) { return (100 + 50 * p.x * -1)+'px' }),
        zIndex: 3
      }}),
    h('div',
      h('h1', 'HEY HEY HEY'), //o.transform(rel, JSON.stringify, JSON.parse)),
      { style: {
        'background-color': hsl,
        position: 'relative',
        top:  o.transform(rel, function (p) { return (200 + 90 * p.y * -1)+'px' }),
        left: o.transform(rel, function (p) { return (200 + 70 * p.x * -1)+'px' }),
        zIndex: 2
      }})
  )
)

